# 准备工作

进行图形开发，需要的准备工作是极多的，因为很多相关的配置需要进行，相关的知识需要学习

# 窗口系统


图形程序是显示在一个窗口里的，那么相应的，就有

* 负责管理窗口的程序（窗口管理器）

* 一些相关概念

> 不过需要注意的是，图形开发的很多东西**不是"跨窗口管理器"的**，使用不支持的东西是会导致运行时的*奇怪的问题*或者**直接崩溃**，这些都有在文档照中标注出

## 窗口管理器&疑难杂症

这是在平台之上再次细分出的概念，有的操作系统 ~~比如linux~~ 上有很多个窗口管理器供给选择

> **得益于winit，这些混乱的差异我们不需要管，我们可以用一个方法做一种事而不是为了每一种窗口管理器编写不同的代码。只需要在使用功能时多注意就可以了**

### Windows的win32

万幸，windows是统一的。windwos的窗口管理器(应该)是一套叫做`win32`的api，我想不会有很多奇怪问题 ~~反正我没碰见过，真碰见了也应该不是我可以解决的~~

### Linux的Xorg

> X11是X Windows System的第11个版本，而Xorg是它的实现，这也是如今最盛行的版本

这是一个诞生于上世纪(1984)的古老系统，四处漏风但是缝缝补补接着用

确切地说，这是一个"窗口服务器"。过去的硬件贫乏且羸弱，个人电脑不盛行，所以Xorg实际上分为三个部分:X Server（X服务器），X Client(X客户端)，和Windows Manager（简称WM，翻译叫做窗口管理器）

> **X Server：**<br>
> X Server负责和驱动交互，监视显示器，键盘鼠标，相应X Client的请求。它也是渲染实际进行的地方

> **X Client**<br>
> 也叫“X应用程序”，是实际上的处理逻辑的地方，可以接受设备的事件来进行处理。它本身没有绘制能力，只能向X Server发送绘制请求和绘图数据。

> **Window Manager**<br>
> 也有叫合成器（Compositor），是一个特殊的X Client程序<br>
> 多个X Client向X Server发送绘制请求时，各X Client程序并不知道彼此的存在，绘制图形出现冲突是很有可能的<br>
> 这就需要一个管理者进行统一协调，即Window Manager，它掌管各X Client的Window（窗口）外观，位置，尺寸，重叠等等<br>
> 它可以直接和本机上的X Server连接，也可以通过网络

基本上配置好了桌面环境的linux都支持/使用的是Xorg，但是你使用的WM也很有可能用的不是Xorg,而是Wayland<br>
> WM也是Wayland的一个概念

X在每个部分都有很多实现

在X Server上Xorg是绝对地位，但是你使用的也可能是在Wayland规范上搞成的叫Xwayland的新X Server，存在的目的是保证过渡时的兼容性

在X Client上有XCB和Xlib，这里不介绍，它们之间还是有差异的

窗口管理器有KWin、 vtwm、Xfwm等，功能、风格各异，有的注重简洁高效，有的注重外观酷炫

### wsl

> wsl虽然可以运行linux桌面程序，但是有很多问题

1. 

## 基本概念

一个窗口大概有这样的一些属性：

> 分类仅供理解使用！无意义，具体内容参见[文档](https://docs.rs/winit/latest/winit/window/struct.WindowAttributes.html)</br>

> 跨平台性的文档具体参见[这个](https://docs.rs/winit/latest/winit/window/struct.WindowBuilder.html)

- 数值上的属性（也就是配置上是某个的属性）
    - 位置 （窗口左上角的位置）
    - 尺寸 （窗口的长款）   
    - 透明度 （默认是不透明的，但是通过修改这个属性这个可以做到透过这个窗口看见下面的窗口的效果    
- 布尔属性（也就是配置上是开/关的属性）
    - 能否缩放
    - 是否可见
    - 有无边框
    - 有无按钮
    - 是不是焦点（被选中的窗口）
- 其他属性
    - 标题 （显示在窗口边框上的）
    - 图标 （显示在任务栏上的应用的图标）
    - 颜色主题（也就是所谓暗色/亮色主题）
    - 全屏的模式（不是/独占屏幕/没有边框）